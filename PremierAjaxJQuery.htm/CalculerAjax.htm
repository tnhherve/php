<!-- 
        auteur : Herve Tamethe Nzokou
        date :  03 mai 2021
        but : calculer avec une requetes ajax
-->
<!doctype html>
<html lang="en">
    <head>

        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" >

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
        <title>Calculer Ajax</title>
        <script type="text/javascript">
            $(document).ready(function () {
                
                
                $("#btnCalculer").click(function(){
                    
                    var nbre1 = $("#nb1").val();
                    var nbre2 = $("#nb2").val();
                                        
                    var xhr = new XMLHttpRequest();
                
                    xhr.open("GET","calcul.php?nb1="+nbre1+"&nb2="+nbre2,true);

                    xhr.onreadystatechange = function(){
                        if (xhr.readyState == 4){
                            $("#loader").show().delay(1000).hide('show');
                            $("#resultat").html(xhr.responseText);
                        }
                    }

                    xhr.send(null);
                    
                    //$("#loader").hide()
                });
                
                
            });
        </script>
        <style type="text/css">
            body {
                margin: 50px 75px;
            }

            h1 {
                text-align: center;
            }

            td {
                padding: 10px 5px;
            }

            #btnCalculer {
                padding: 5px 20px;
            }

            #resultat {
                text-align: center;
                font-size: 16pt;
            }

            img {
                margin-left: 30px;
            }
        </style>
    </head>
    <body>

        <div class="container">
            <div class="row">
                <div class="col-lg-3"></div>
                <div class="col-lg-6">
                    <h1>Calculer Ajax avec GET</h1>
                    <br/>
                    <br/>
                    <form>
                        <table>
                            <tr>
                                <td><label for="nb1">Nombre 1</label>:</td>
                                <td><input id="nb1" type="text" name="value1"/></td>
                            </tr>

                            <tr>
                                <td><label for="nb2">Nombre 2</label>:</td>
                                <td><input id="nb2" type="text" name="value2"/></td>
                            </tr>
                            <tr>
                                <td class="buttonTd" colspan="2"><button id="btnCalculer" class="btn btn-success btn-lg" type="button" >Calculer</button>
                                    <img src="load.gif" alt="loader" id="loader" style="display:none;"/></td>
                            </tr>
                        </table>


                    </form>
                    <br/>
                    <div>
                        <p id="resultat">Aucun calcul n'a encore été effectué</p>.
                    </div>
                </div>
                <div class="col-lg-3"></div>
            </div>

        </div>

    </body>
</html>
